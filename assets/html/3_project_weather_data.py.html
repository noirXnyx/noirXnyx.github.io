<html>
<head>
<title>weather_data.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #7a7e85;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
weather_data.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">requests </span><span class="s2">#Python library used to make HTTP requests. This library simplifies the process</span>
                <span class="s2"># of sending HTTP requests to interact with web services (APIs) and retrieve data.</span>

<span class="s2"># Part C1 in the task.</span>
<span class="s2"># As specified in the task, this is the class that contains and encapsulate all the data and methods</span>
<span class="s2"># related to weather data for a specific location and date</span>
<span class="s0">class </span><span class="s1">WeatherData</span><span class="s3">:</span>
    <span class="s0">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">latitude</span><span class="s3">, </span><span class="s1">longitude</span><span class="s3">, </span><span class="s1">date</span><span class="s3">):</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">latitude </span><span class="s3">= </span><span class="s1">latitude</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">longitude </span><span class="s3">= </span><span class="s1">longitude</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">date </span><span class="s3">= </span><span class="s1">date</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">year </span><span class="s3">= </span><span class="s1">date</span><span class="s3">.</span><span class="s1">year</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">month </span><span class="s3">= </span><span class="s1">date</span><span class="s3">.</span><span class="s1">month</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">day </span><span class="s3">= </span><span class="s1">date</span><span class="s3">.</span><span class="s1">day</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">avg_temp </span><span class="s3">= </span><span class="s0">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">min_temp </span><span class="s3">= </span><span class="s0">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">max_temp </span><span class="s3">= </span><span class="s0">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">avg_wind_speed </span><span class="s3">= </span><span class="s0">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">min_wind_speed </span><span class="s3">= </span><span class="s0">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">max_wind_speed </span><span class="s3">= </span><span class="s0">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">sum_precipitation </span><span class="s3">= </span><span class="s0">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">min_precipitation </span><span class="s3">= </span><span class="s0">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">max_precipitation </span><span class="s3">= </span><span class="s0">None</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">data </span><span class="s3">= </span><span class="s0">None</span>

    <span class="s2"># This is a special method that returns a string representation of the object</span>
    <span class="s2"># When inspecting an object in an interactive session, Python calls the '__repr__'</span>
    <span class="s2"># This is useful for debugging and logging, as it shows the current state of the object's attributes</span>
    <span class="s2"># This is useful in quickly understanding the data contained within the instance 'WeatherData'</span>
    <span class="s0">def </span><span class="s1">__repr__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s0">return </span><span class="s3">(</span><span class="s4">f&quot;WeatherData(</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">latitude</span><span class="s0">}</span><span class="s4">, </span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">longitude</span><span class="s0">}</span><span class="s4">, </span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s0">}</span><span class="s4">, &quot;</span>
                <span class="s4">f&quot;avg_temp=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">avg_temp</span><span class="s0">}</span><span class="s4">, min_temp=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">min_temp</span><span class="s0">}</span><span class="s4">, max_temp=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">max_temp</span><span class="s0">}</span><span class="s4">, &quot;</span>
                <span class="s4">f&quot;avg_wind_speed=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">avg_wind_speed</span><span class="s0">}</span><span class="s4">, min_wind_speed=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">min_wind_speed</span><span class="s0">}</span><span class="s4">, max_wind_speed=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">max_wind_speed</span><span class="s0">}</span><span class="s4">, &quot;</span>
                <span class="s4">f&quot;sum_precipitation=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">sum_precipitation</span><span class="s0">}</span><span class="s4">, min_precipitation=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">min_precipitation</span><span class="s0">}</span><span class="s4">, max_precipitation=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">max_precipitation</span><span class="s0">}</span><span class="s4">)&quot;</span><span class="s3">)</span>

    <span class="s2"># This part shows the method for fetching weather data for the specified location and date range</span>
    <span class="s2"># URL is directly copied from open meteo right after changing the location, timezone, and daily weather variables</span>
    <span class="s2"># In task part 2, it is specified that the data should be the most recent 5 years, so I made the start and end dates dynamic.</span>
    <span class="s0">def </span><span class="s1">fetch_weather_data</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">start_date </span><span class="s3">= (</span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s1">year</span><span class="s3">=</span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">year </span><span class="s3">- </span><span class="s5">5</span><span class="s3">)).</span><span class="s1">strftime</span><span class="s3">(</span><span class="s4">'%Y-%m-%d'</span><span class="s3">)</span>
        <span class="s1">end_date </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">strftime</span><span class="s3">(</span><span class="s4">'%Y-%m-%d'</span><span class="s3">)</span>
        <span class="s1">url </span><span class="s3">= (</span><span class="s4">f&quot;https://archive-api.open-meteo.com/v1/archive?&quot;</span>
               <span class="s4">f&quot;latitude=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">latitude</span><span class="s0">}</span><span class="s4">&amp;longitude=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">longitude</span><span class="s0">}</span><span class="s4">&amp;start_date=</span><span class="s0">{</span><span class="s1">start_date</span><span class="s0">}</span><span class="s4">&amp;end_date=</span><span class="s0">{</span><span class="s1">end_date</span><span class="s0">}</span><span class="s4">&quot;</span>
               <span class="s4">f&quot;&amp;daily=temperature_2m_max,temperature_2m_min,temperature_2m_mean,precipitation_sum,wind_speed_10m_max&quot;</span>
               <span class="s4">f&quot;&amp;temperature_unit=fahrenheit&amp;wind_speed_unit=mph&amp;precipitation_unit=inch&amp;timezone=America%2FNew_York&quot;</span><span class="s3">)</span>

        <span class="s2"># This is the GET request sent to the constructed URL. The URL is taken directly from open-meteo and edited.</span>
        <span class="s2"># Response's status code 200 indicates success, and the response is parsed as JSON and stored in the 'data' variable</span>
        <span class="s1">response </span><span class="s3">= </span><span class="s1">requests</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">url</span><span class="s3">)</span>
        <span class="s0">if </span><span class="s1">response</span><span class="s3">.</span><span class="s1">status_code </span><span class="s3">== </span><span class="s5">200</span><span class="s3">:</span>
            <span class="s1">data </span><span class="s3">= </span><span class="s1">response</span><span class="s3">.</span><span class="s1">json</span><span class="s3">()</span>

            <span class="s2"># Processing the retrieved data.</span>
            <span class="s2"># This code calculates the average, minimum, maximum,and sum for the relevant weather parameters.</span>
            <span class="s2"># Mean = add up all the given values, then divide by how many values there are. This calculation</span>
            <span class="s2"># is the dame as getting the average. So, for ease of use, I am using avg all throughout.</span>
            <span class="s2"># Filter out None values before summing and averaging. 'None' values represent missing data</span>
            <span class="s1">temp_mean_values </span><span class="s3">= [</span><span class="s1">val </span><span class="s0">for </span><span class="s1">val </span><span class="s0">in </span><span class="s1">data</span><span class="s3">[</span><span class="s4">'daily'</span><span class="s3">][</span><span class="s4">'temperature_2m_mean'</span><span class="s3">] </span><span class="s0">if </span><span class="s1">val </span><span class="s0">is not None</span><span class="s3">]</span>
            <span class="s1">temp_min_values </span><span class="s3">= [</span><span class="s1">val </span><span class="s0">for </span><span class="s1">val </span><span class="s0">in </span><span class="s1">data</span><span class="s3">[</span><span class="s4">'daily'</span><span class="s3">][</span><span class="s4">'temperature_2m_min'</span><span class="s3">] </span><span class="s0">if </span><span class="s1">val </span><span class="s0">is not None</span><span class="s3">]</span>
            <span class="s1">temp_max_values </span><span class="s3">= [</span><span class="s1">val </span><span class="s0">for </span><span class="s1">val </span><span class="s0">in </span><span class="s1">data</span><span class="s3">[</span><span class="s4">'daily'</span><span class="s3">][</span><span class="s4">'temperature_2m_max'</span><span class="s3">] </span><span class="s0">if </span><span class="s1">val </span><span class="s0">is not None</span><span class="s3">]</span>
            <span class="s1">wind_speed_values </span><span class="s3">= [</span><span class="s1">val </span><span class="s0">for </span><span class="s1">val </span><span class="s0">in </span><span class="s1">data</span><span class="s3">[</span><span class="s4">'daily'</span><span class="s3">][</span><span class="s4">'wind_speed_10m_max'</span><span class="s3">] </span><span class="s0">if </span><span class="s1">val </span><span class="s0">is not None</span><span class="s3">]</span>
            <span class="s1">precipitation_values </span><span class="s3">= [</span><span class="s1">val </span><span class="s0">for </span><span class="s1">val </span><span class="s0">in </span><span class="s1">data</span><span class="s3">[</span><span class="s4">'daily'</span><span class="s3">][</span><span class="s4">'precipitation_sum'</span><span class="s3">] </span><span class="s0">if </span><span class="s1">val </span><span class="s0">is not None</span><span class="s3">]</span>

            <span class="s2"># Calculate averages, min, and max while handling empty lists</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">avg_temp </span><span class="s3">= </span><span class="s1">sum</span><span class="s3">(</span><span class="s1">temp_mean_values</span><span class="s3">) / </span><span class="s1">len</span><span class="s3">(</span><span class="s1">temp_mean_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">temp_mean_values </span><span class="s0">else None</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">min_temp </span><span class="s3">= </span><span class="s1">min</span><span class="s3">(</span><span class="s1">temp_min_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">temp_min_values </span><span class="s0">else None</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">max_temp </span><span class="s3">= </span><span class="s1">max</span><span class="s3">(</span><span class="s1">temp_max_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">temp_max_values </span><span class="s0">else None</span>

            <span class="s1">self</span><span class="s3">.</span><span class="s1">avg_wind_speed </span><span class="s3">= </span><span class="s1">sum</span><span class="s3">(</span><span class="s1">wind_speed_values</span><span class="s3">) / </span><span class="s1">len</span><span class="s3">(</span><span class="s1">wind_speed_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">wind_speed_values </span><span class="s0">else None</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">min_wind_speed </span><span class="s3">= </span><span class="s1">min</span><span class="s3">(</span><span class="s1">wind_speed_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">wind_speed_values </span><span class="s0">else None</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">max_wind_speed </span><span class="s3">= </span><span class="s1">max</span><span class="s3">(</span><span class="s1">wind_speed_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">wind_speed_values </span><span class="s0">else None</span>

            <span class="s1">self</span><span class="s3">.</span><span class="s1">sum_precipitation </span><span class="s3">= </span><span class="s1">sum</span><span class="s3">(</span><span class="s1">precipitation_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">precipitation_values </span><span class="s0">else None</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">min_precipitation </span><span class="s3">= </span><span class="s1">min</span><span class="s3">(</span><span class="s1">precipitation_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">precipitation_values </span><span class="s0">else None</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">max_precipitation </span><span class="s3">= </span><span class="s1">max</span><span class="s3">(</span><span class="s1">precipitation_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">precipitation_values </span><span class="s0">else None</span>

        <span class="s2"># This is for handling errors. If the API request fails (status code is not 200), an error message is</span>
        <span class="s2"># printed with the relevant status code</span>
        <span class="s0">else</span><span class="s3">:</span>
            <span class="s1">print</span><span class="s3">(</span><span class="s4">f&quot;Error fetching data: </span><span class="s0">{</span><span class="s1">response</span><span class="s3">.</span><span class="s1">status_code</span><span class="s0">}</span><span class="s4">&quot;</span><span class="s3">)</span>

<span class="s2"># separate methods for part c2</span>
    <span class="s0">def </span><span class="s1">fetch_mean_temperature</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">start_date </span><span class="s3">= (</span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s1">year</span><span class="s3">=</span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">year </span><span class="s3">- </span><span class="s5">5</span><span class="s3">)).</span><span class="s1">strftime</span><span class="s3">(</span><span class="s4">'%Y-%m-%d'</span><span class="s3">)</span>
        <span class="s1">end_date </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">strftime</span><span class="s3">(</span><span class="s4">'%Y-%m-%d'</span><span class="s3">)</span>
        <span class="s1">url </span><span class="s3">= (</span><span class="s4">f&quot;https://archive-api.open-meteo.com/v1/archive?&quot;</span>
               <span class="s4">f&quot;latitude=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">latitude</span><span class="s0">}</span><span class="s4">&amp;longitude=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">longitude</span><span class="s0">}</span><span class="s4">&amp;start_date=</span><span class="s0">{</span><span class="s1">start_date</span><span class="s0">}</span><span class="s4">&amp;end_date=</span><span class="s0">{</span><span class="s1">end_date</span><span class="s0">}</span><span class="s4">&quot;</span>
               <span class="s4">f&quot;&amp;daily=temperature_2m_max,temperature_2m_min,temperature_2m_mean,precipitation_sum,wind_speed_10m_max&quot;</span>
               <span class="s4">f&quot;&amp;temperature_unit=fahrenheit&amp;wind_speed_unit=mph&amp;precipitation_unit=inch&amp;timezone=America%2FNew_York&quot;</span><span class="s3">)</span>

        <span class="s1">response </span><span class="s3">= </span><span class="s1">requests</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">url</span><span class="s3">)</span>
        <span class="s0">if </span><span class="s1">response</span><span class="s3">.</span><span class="s1">status_code </span><span class="s3">== </span><span class="s5">200</span><span class="s3">:</span>
            <span class="s1">data </span><span class="s3">= </span><span class="s1">response</span><span class="s3">.</span><span class="s1">json</span><span class="s3">()</span>

            <span class="s1">temp_mean_values </span><span class="s3">= [</span><span class="s1">val </span><span class="s0">for </span><span class="s1">val </span><span class="s0">in </span><span class="s1">data</span><span class="s3">[</span><span class="s4">'daily'</span><span class="s3">][</span><span class="s4">'temperature_2m_mean'</span><span class="s3">] </span><span class="s0">if </span><span class="s1">val </span><span class="s0">is not None</span><span class="s3">]</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">avg_temp </span><span class="s3">= </span><span class="s1">sum</span><span class="s3">(</span><span class="s1">temp_mean_values</span><span class="s3">) / </span><span class="s1">len</span><span class="s3">(</span><span class="s1">temp_mean_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">temp_mean_values </span><span class="s0">else None</span>
            <span class="s1">print</span><span class="s3">(</span><span class="s4">f&quot;Mean Temperature: </span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">avg_temp</span><span class="s0">} </span><span class="s4">Fahrenheit&quot;</span><span class="s3">)</span>
        <span class="s0">else</span><span class="s3">:</span>
            <span class="s1">print</span><span class="s3">(</span><span class="s4">f&quot;Error fetching mean temperature data: </span><span class="s0">{</span><span class="s1">response</span><span class="s3">.</span><span class="s1">status_code</span><span class="s0">}</span><span class="s4">&quot;</span><span class="s3">)</span>

    <span class="s0">def </span><span class="s1">fetch_max_wind_speed</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">start_date </span><span class="s3">= (</span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s1">year</span><span class="s3">=</span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">year </span><span class="s3">- </span><span class="s5">5</span><span class="s3">)).</span><span class="s1">strftime</span><span class="s3">(</span><span class="s4">'%Y-%m-%d'</span><span class="s3">)</span>
        <span class="s1">end_date </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">strftime</span><span class="s3">(</span><span class="s4">'%Y-%m-%d'</span><span class="s3">)</span>
        <span class="s1">url </span><span class="s3">= (</span><span class="s4">f&quot;https://archive-api.open-meteo.com/v1/archive?&quot;</span>
               <span class="s4">f&quot;latitude=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">latitude</span><span class="s0">}</span><span class="s4">&amp;longitude=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">longitude</span><span class="s0">}</span><span class="s4">&amp;start_date=</span><span class="s0">{</span><span class="s1">start_date</span><span class="s0">}</span><span class="s4">&amp;end_date=</span><span class="s0">{</span><span class="s1">end_date</span><span class="s0">}</span><span class="s4">&quot;</span>
               <span class="s4">f&quot;&amp;daily=temperature_2m_max,temperature_2m_min,temperature_2m_mean,precipitation_sum,wind_speed_10m_max&quot;</span>
               <span class="s4">f&quot;&amp;temperature_unit=fahrenheit&amp;wind_speed_unit=mph&amp;precipitation_unit=inch&amp;timezone=America%2FNew_York&quot;</span><span class="s3">)</span>

        <span class="s1">response </span><span class="s3">= </span><span class="s1">requests</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">url</span><span class="s3">)</span>
        <span class="s0">if </span><span class="s1">response</span><span class="s3">.</span><span class="s1">status_code </span><span class="s3">== </span><span class="s5">200</span><span class="s3">:</span>
            <span class="s1">data </span><span class="s3">= </span><span class="s1">response</span><span class="s3">.</span><span class="s1">json</span><span class="s3">()</span>
            <span class="s1">wind_speed_values </span><span class="s3">= [</span><span class="s1">val </span><span class="s0">for </span><span class="s1">val </span><span class="s0">in </span><span class="s1">data</span><span class="s3">[</span><span class="s4">'daily'</span><span class="s3">][</span><span class="s4">'wind_speed_10m_max'</span><span class="s3">] </span><span class="s0">if </span><span class="s1">val </span><span class="s0">is not None</span><span class="s3">]</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">max_wind_speed </span><span class="s3">= </span><span class="s1">max</span><span class="s3">(</span><span class="s1">wind_speed_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">wind_speed_values </span><span class="s0">else None</span>
            <span class="s1">print</span><span class="s3">(</span><span class="s4">f&quot;Maximum Wind Speed: </span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">max_wind_speed</span><span class="s0">} </span><span class="s4">mph&quot;</span><span class="s3">)</span>
        <span class="s0">else</span><span class="s3">:</span>
            <span class="s1">print</span><span class="s3">(</span><span class="s4">f&quot;Error fetching maximum wind speed data: </span><span class="s0">{</span><span class="s1">response</span><span class="s3">.</span><span class="s1">status_code</span><span class="s0">}</span><span class="s4">&quot;</span><span class="s3">)</span>

    <span class="s0">def </span><span class="s1">fetch_precipitation_sum</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s1">start_date </span><span class="s3">= (</span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">replace</span><span class="s3">(</span><span class="s1">year</span><span class="s3">=</span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">year </span><span class="s3">- </span><span class="s5">5</span><span class="s3">)).</span><span class="s1">strftime</span><span class="s3">(</span><span class="s4">'%Y-%m-%d'</span><span class="s3">)</span>
        <span class="s1">end_date </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">date</span><span class="s3">.</span><span class="s1">strftime</span><span class="s3">(</span><span class="s4">'%Y-%m-%d'</span><span class="s3">)</span>
        <span class="s1">url </span><span class="s3">= (</span><span class="s4">f&quot;https://archive-api.open-meteo.com/v1/archive?&quot;</span>
               <span class="s4">f&quot;latitude=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">latitude</span><span class="s0">}</span><span class="s4">&amp;longitude=</span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">longitude</span><span class="s0">}</span><span class="s4">&amp;start_date=</span><span class="s0">{</span><span class="s1">start_date</span><span class="s0">}</span><span class="s4">&amp;end_date=</span><span class="s0">{</span><span class="s1">end_date</span><span class="s0">}</span><span class="s4">&quot;</span>
               <span class="s4">f&quot;&amp;daily=temperature_2m_max,temperature_2m_min,temperature_2m_mean,precipitation_sum,wind_speed_10m_max&quot;</span>
               <span class="s4">f&quot;&amp;temperature_unit=fahrenheit&amp;wind_speed_unit=mph&amp;precipitation_unit=inch&amp;timezone=America%2FNew_York&quot;</span><span class="s3">)</span>

        <span class="s1">response </span><span class="s3">= </span><span class="s1">requests</span><span class="s3">.</span><span class="s1">get</span><span class="s3">(</span><span class="s1">url</span><span class="s3">)</span>
        <span class="s0">if </span><span class="s1">response</span><span class="s3">.</span><span class="s1">status_code </span><span class="s3">== </span><span class="s5">200</span><span class="s3">:</span>
            <span class="s1">data </span><span class="s3">= </span><span class="s1">response</span><span class="s3">.</span><span class="s1">json</span><span class="s3">()</span>
            <span class="s1">precipitation_values </span><span class="s3">= [</span><span class="s1">val </span><span class="s0">for </span><span class="s1">val </span><span class="s0">in </span><span class="s1">data</span><span class="s3">[</span><span class="s4">'daily'</span><span class="s3">][</span><span class="s4">'precipitation_sum'</span><span class="s3">] </span><span class="s0">if </span><span class="s1">val </span><span class="s0">is not None</span><span class="s3">]</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">sum_precipitation </span><span class="s3">= </span><span class="s1">sum</span><span class="s3">(</span><span class="s1">precipitation_values</span><span class="s3">) </span><span class="s0">if </span><span class="s1">precipitation_values </span><span class="s0">else None</span>
            <span class="s1">print</span><span class="s3">(</span><span class="s4">f&quot;Sum Precipitation: </span><span class="s0">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">sum_precipitation</span><span class="s0">} </span><span class="s4">inch&quot;</span><span class="s3">)</span>
        <span class="s0">else</span><span class="s3">:</span>
            <span class="s1">print</span><span class="s3">(</span><span class="s4">f&quot;Error fetching precipitation data: </span><span class="s0">{</span><span class="s1">response</span><span class="s3">.</span><span class="s1">status_code</span><span class="s0">}</span><span class="s4">&quot;</span><span class="s3">)</span>
</pre>
</body>
</html>